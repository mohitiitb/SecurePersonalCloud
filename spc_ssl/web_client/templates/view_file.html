<!DOCTYPE html>
<html>
<head>


	<title>File View Window</title>

</head>
<body>
<!--{{file_data}}-->
	<h1>{{fname}}</h1>

		<!--<p id="file">{{file_data}}</p>-->
	<p id="file"></p>
	<script src="https://cdn.rawgit.com/CryptoStore/crypto-js/3.1.2/build/rollups/aes.js"></script>
	<script src="https://cdn.rawgit.com/CryptoStore/crypto-js/3.1.2/build/components/mode-cfb-min.js"></script>
<script >
	var base64ciphertextFromPython = '{{ file_data }}';
    var ciphertext = CryptoJS.enc.Base64.parse(base64ciphertextFromPython);

    // split iv and ciphertext
    var iv = ciphertext.clone();
    iv.sigBytes = 16;
    iv.clamp();
    ciphertext.words.splice(0, 4); // delete 4 words = 16 bytes
    ciphertext.sigBytes -= 16;

    var key = CryptoJS.enc.Utf8.parse("124567890123456");

    // decryption
    var decrypted = CryptoJS.AES.decrypt({ciphertext: ciphertext}, key, {
      iv: iv,
      mode: CryptoJS.mode.CFB
    });
    txt=decrypted.toString(CryptoJS.enc.Utf8);
    //document.getElementById("file").innerHTML = '{{ file_data }}';
    //document.getElementById("file").innerHTML = "hello";
    document.getElementById("file").innerHTML =txt;
    <!--console.log (txt);-->

</script>

</body>
</html>
